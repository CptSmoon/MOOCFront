<!--main form-->
<div class="card-box">
  <h4 class="header-title m-t-0 m-b-30">Enregistrer une Livraison</h4>
  <form class="form-horizontal" role="form" *ngIf="livraison">
    <div class="form-group row">
      <label class="col-sm-3 control-label">Client</label>
      <div class="col-sm-6" *ngIf="clients">
        <select class="form-control" [(ngModel)]="livraison.client" name="clientSelect">
          <option *ngFor="let c of clients, let i=index" [ngValue]="c">{{c.name}}</option>
        </select>
      </div>
      <!--<div class="col-sm-3">-->
        <!--<button id="addMP" class="btn btn-primary waves-effect waves-light" data-toggle="modal"-->
                <!--data-target="#add-mp-modal">-->
          <!--<div class="glyphicon glyphicon-plus"></div> &nbsp;Ajouter-->
        <!--</button>-->
      <!--</div>-->
    </div>
    <div class="form-group row">
      <label class="col-sm-3 control-label">Montant</label>
      <div class="col-sm-6">
        <div class="input-group">
          <input type="number" class="form-control" placeholder="0.000" name="prix" [(ngModel)]="livraison.montant">
          <span class="input-group-addon">DT</span>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-3 control-label">Date</label>
      <div class="col-sm-6">
        <input type="date" class="form-control" name="date" [(ngModel)]="livraison.date">
      </div>
    </div>
    <div class="form-group row" *ngFor="let p of livraison.produits, let i= index" >
      <label class="col-sm-3 control-label" *ngIf="i===0">Produits</label>
      <div class="col-sm-3" *ngIf="i!=0"></div>
      <div class="col-sm-3">
        <select class="form-control" [(ngModel)]="p.produit" name="unitSelect">
          <option *ngFor="let pr of produits, let j=index" [ngValue]="pr">{{pr.label}}</option>
        </select>
      </div>
      <div class="col-sm-3">
        <input type="number" class="form-control" placeholder="Quantite" [(ngModel)]="p.quantite" name="quantite{{i}}" >
      </div>
      <div class="col-sm-3">
        <a class="btn btn-danger btn-primary waves-effect waves-light" style="margin-left: 1%" *ngIf="livraison.produits.length>1" (click)="removeCol(i)">
          <div class="glyphicon glyphicon-remove"></div> &nbsp;Supprimer</a>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-5"></div>
      <div class="col-sm-2">
        <div style="margin-left: 40%">
        <button *ngIf="validProdData()" id="addLivraison" class="btn btn-primary waves-effect waves-light" (click)="addProduct()"><i class="fa fa-plus"></i> Ajouter Produit</button>
        <button *ngIf="!validProdData()" id="addLivraison" class="btn btn-primary waves-effect waves-light" disabled><i class="fa fa-plus"></i> Ajouter Produit</button>
        </div>
        </div>
      <div class="col-sm-2">
        <button class="btn btn-success btn-primary waves-effect waves-light" style="margin-left: 25%" (click)="add()" *ngIf="validData()">
          <div class="glyphicon glyphicon-ok"></div> &nbsp;Enregistrer
        </button>
        <button *ngIf="!validData()" class="btn btn-warning btn-primary waves-effect waves-light" style="margin-left: 25%"  disabled>
          <div class="glyphicon glyphicon-ok"></div> &nbsp;Enregistrer
        </button>
      </div>
      <a class="btn btn-danger btn-primary waves-effect waves-light" href="#/livraison" style="margin-left: 1%">
        <div class="glyphicon glyphicon-remove"></div> &nbsp;Annuler</a>
    </div>
  </form>
</div>
